---
layout: post
title: Tell me more, tell me more
date: 2014-07-07 00:34:41.000000000 -04:00
type: post
published: true
status: publish
categories:
- '1'
tags: []
meta:
  _wpcom_is_markdown: '1'
  sharing_disabled: '1'
  _wpas_skip_facebook: '1'
  _wpas_skip_google_plus: '1'
  _wpas_skip_twitter: '1'
  _wpas_skip_linkedin: '1'
  _wpas_skip_tumblr: '1'
  _wpas_skip_path: '1'
  _publicize_pending: '1'
  _rest_api_published: '1'
  _rest_api_client_id: '-1'
  _oembed_7e6ddecf0da5436f96065f8f2d124444: '{{unknown}}'
  _oembed_5a89f67bf45681854615252b2ce350d1: '{{unknown}}'
  _oembed_01b754d34bc8754149ad8735c0984b89: '{{unknown}}'
  _oembed_399b6c7c72e7fea3d3519227cb1a8bf7: '{{unknown}}'
  _oembed_7e692f673cf8e1df168598bc3c16f845: '{{unknown}}'
  _oembed_c012726dd61a89f5dd9f0fdeaeab4e5b: '{{unknown}}'
author:
  login: 2shortplanks
  email: mark@twoshortplanks.com
  display_name: 2shortplanks
  first_name: Mark
  last_name: Fowler
---
<p>A new version of <a href="https://metacpan.org/pod/Test::DatabaseRow">Test::DatabaseRow</a> has just escaped onto the CPAN, with a minor new feature <a href="https://metacpan.org/pod/Test::DatabaseRow#verbose_data">verbose data</a> to make working out what went wrong in the database test even easier when the worst happens</p>
<p>In a nutshell this feature allows you to output in diagnostics all the results the database returned (not just listing the first thing that didn't match, which is the default thing <code>row_ok</code> does in a similar way to Test::More's <code>is_deeply</code> does.)</p>
<p>In other words instead of writing this:</p>
<p><code></p>
<pre>    all_row_ok(
       table =&gt; "contacts",
       where =&gt; [ cid =&gt; 123 ],
       tests =&gt; [ name =&gt; "trelane" ],
       <b>store_rows =&gt; \@rows</b>,
       description =&gt; "contact 123's name is trelane"
     ) <b>or diag explain \@rows</b>;</pre>
<p></code></p>
<p>You can just write this:</p>
<p><code></p>
<pre>    all_row_ok(
       table =&gt; "contacts",
       where =&gt; [ cid =&gt; 123 ],
       tests =&gt; [ name =&gt; "trelane" ],
       <b>verbose_data =&gt; 1</b>,
       description =&gt; "contact 123's name is trelane"
     );</pre>
<p></code></p>
<p>Or even just write this:</p>
<p><code></p>
<pre>    all_row_ok(
       table =&gt; "contacts",
       where =&gt; [ cid =&gt; 123 ],
       tests =&gt; [ name =&gt; "trelane" ],
       description =&gt; "contact 123's name is trelane"
     );</pre>
<p></code></p>
<p>And turn on verbosity from the command line when you run the tests</p>
<p><code>
<pre>TEST_DBROW_VERBOSE_DATA=1 perl mytest.pl</pre>
<p></code></p>
